#include <unity.h>
#include <runner.h>


#include <stdio.h>


#include "test_cmux_services.h"
#include "services/test_parameter_negotiation.h"
#include "services/test_port_negotiation.h"
#include "services/test_service_negotiation.h"
#include "services/test_modem_status.h"
#include "services/test_line_status.h"
#include "test_cmux_service_request.h"
#include "test_cmux_client.h"
#include "test_cmux_server.h"
#include "test_cmux_buffer.h"

void setUp() {}
void tearDown() {}

// void dlc_establish(){
//     uint8_t sabm_cmd[] = {0xF9,0x03,0x3F,0x01,0x1C,0xF9};
//     uint8_t ua_response[] = {0xF9,0x03,0x73,0x01,0xD7,0xF9};

// }

// void dlc_establish_vc1_open_virtual_port(){
//     uint8_t sabm_cmd[] = {0xF9,0x07,0x3F,0x01,0xDE,0xF9 };
//     uint8_t ua_response[] = {0xF9, 0x07, 0x73, 0x01, 0x15, 0xF9 };

// }

// void dlc_establish_vc2_open_virtual_port(){
//     uint8_t signal_status[] = {0xF9, 0x03, 0xEF, 0x09, 0xE3, 0x05, 0x0B, 0x05, 0xFB, 0xF9};
//     uint8_t status_response[] = {0xF9,0x01,0xEF,0x09, 0xE1, 0x05, 0x0B, 0x05, 0x9A, 0xF9};

// }

// void dlc_status(){
//     uint8_t module_sent_status[] = {0xF9, 0x01, 0xEF, 0x09, 0xE3, 0x05, 0x0B, 0x4D ,0x9A, 0xF9};
//     uint8_t ua_answer[] = {0xF9, 0x03, 0xEF, 0x09, 0xE1, 0x05, 0x0B, 0x4D, 0xFB, 0xF9};
// }

// void ua_signal_status(){
//     uint8_t us_status[] = {0xF9, 0x03, 0xEF, 0x09, 0xE3, 0x05, 0x0B, 0x05, 0xFB, 0xF9};
//     uint8_t virtual_status[] = {0xF9, 0x03, 0xEF, 0x09, 0xE1, 0x05, 0x0B, 0x4C, 0xFB, 0xF9};

// }

// void ua_send_at_cgmr(){
//     uint8_t us_cgmr[] = {0xF9, 0x07, 0xEF, 0x11, 0x41, 0x54, 0x2B, 0x43, 0x47, 0x4D, 0x52, 0x0D, 0x2B, 0xF9};
//     const char * cgmr = "AT+CGMR";
// }

// void module_cgmr_response(){
//     uint8_t module_cgmr[] = {0xF9, 0x05, 0xEF, 0x27, 0x0D, 0x0A, 0x30, 0x37, 0x2E, 0x30, 0x32, 0x2E, 0x35, 0x30, 0x34, 0x0D, 0x0A, 0x0D, 0x0A, 0x4F, 0x4B, 0x0D, 0x0A, 0x80, 0xF9};
//     const char * cgmr = "\r\n07.02.504\r\n\r\n<OK>";
// }

// void enter_power_save(){
//     uint8_t uih_frame[] = {0xF9, 0x03, 0xEF, 0x05, 0x41, 0x01, 0xF2, 0xF9};

// }

// void psc(){
//     uint8_t psc_cmd[] = {0xF9, 0x03, 0xEF, 0x07, 0x43, 0x03, 0x07, 0x11, 0xF9};
//     uint8_t psc_rsp[] = {0xF9, 0x01, 0xEF, 0x07, 0x41, 0x03, 0x01, 0x70, 0xF9 };

// }

// void crc8_test_sequence2(){
//   uint8_t data[] = {0x01,0x02,0x03,0x04,0x05,0x06};
//   uint8_t crc = cmux_crc(data, sizeof(data));

//   TEST_ASSERT_EQUAL(0x45, crc);
// }


MAIN()
{
    setvbuf(stdout, NULL, _IONBF, 0);

    test_cmux_buffer();
    test_cmux_services();
    test_parameter_negotiation();
    test_port_negotiation();
    test_service_negotiation();
    test_modem_status();
    test_line_status();
    test_cmux_service_request_codec();

    test_cmux_client();
    test_cmux_server();
    return 0;
}
